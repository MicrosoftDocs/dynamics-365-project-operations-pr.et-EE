---
title: Projekti lepingute ja projektide sünkroonimine otse Project Service Automationist rakendusse Finance
description: Selles teemas kirjeldatakse malli ja aluseks olevaid tööülesandeid, mida kasutatakse projektilepingute ja projektide sünkroonimiseks otse rakendusest Microsoft Dynamics 365 Project Service Automation rakendusse Dynamics 365 Finance.
author: Yowelle
manager: AnnBe
ms.date: 12/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: b454ad57-2fd6-46c9-a77e-646de4153067
ms.search.region: Global
ms.author: andchoi
ms.search.validFrom: 2017-12-13
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: 1a470fd86ceccd7b6058da6972399a6d6be2a991
ms.sourcegitcommit: 2b74edd31f38410024a01124c9202a4d94464d04
ms.translationtype: HT
ms.contentlocale: et-EE
ms.lasthandoff: 12/17/2020
ms.locfileid: "4764814"
---
# <a name="synchronize-project-contracts-and-projects-directly-from-project-service-automation-to-finance"></a><span data-ttu-id="cba30-103">Projekti lepingute ja projektide sünkroonimine otse Project Service Automationist rakendusse Finance</span><span class="sxs-lookup"><span data-stu-id="cba30-103">Synchronize project contracts and projects directly from Project Service Automation to Finance</span></span> 

[!include[banner](../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

<span data-ttu-id="cba30-104">Selles teemas kirjeldatakse malli ja aluseks olevaid tööülesandeid, mida kasutatakse projektilepingute ja projektide sünkroonimiseks otse rakendusest Dynamics 365 Project Service Automation rakendusse Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="cba30-104">This topic describes the template and underlying tasks that are used to synchronize project contracts and projects directly from Dynamics 365 Project Service Automation to Dynamics 365 Finance.</span></span>

> [!NOTE] 
> <span data-ttu-id="cba30-105">Kui kasutate rakendust Enterprise edition 7.3.0, peate installima KB 4074835.</span><span class="sxs-lookup"><span data-stu-id="cba30-105">If you're using Enterprise edition 7.3.0, you must install KB 4074835.</span></span>

## <a name="data-flow-for-project-service-automation-to-finance"></a><span data-ttu-id="cba30-106">Andmevoog rakendusest Project Service Automation rakendusse Finance</span><span class="sxs-lookup"><span data-stu-id="cba30-106">Data flow for Project Service Automation to Finance</span></span>

> [!NOTE]
> <span data-ttu-id="cba30-107">Enne, kui saate kasutada Project Service Automationist Finance'i integratsioonilahendust, peaksite olema tuttav Dynamics 365 andmete integreerimise funktsiooniga.</span><span class="sxs-lookup"><span data-stu-id="cba30-107">Before you can use the Project Service Automation to Finance integration solution, you should be familiar with the Dynamics 365 Data integration feature.</span></span>

<span data-ttu-id="cba30-108">Project Service Automationist Finance’i integreerimise lahendus kasutab andmete integreerimise funktsiooni, et sünkroonida andmeid rakenduste Project Service Automation ja Finance olemite üleselt.</span><span class="sxs-lookup"><span data-stu-id="cba30-108">The Project Service Automation to Finance integration solution uses the Data integration feature to synchronize data across instances of Project Service Automation and Finance.</span></span> <span data-ttu-id="cba30-109">Integreerimismall, mis on saadaval andmete integreerimise funktsiooniga võimaldab projekti lepingute, projektide, projekti lepinguridade vaheeesmärkide andmete voogu Project Service Automationist Finance’i.</span><span class="sxs-lookup"><span data-stu-id="cba30-109">The integration template that is available with the Data integration feature enables the flow of data about project contracts, projects, project contract lines, and project contract line milestones from Project Service Automation to Finance.</span></span>

<span data-ttu-id="cba30-110">Järgmisel joonisel on näidatud, kuidas andmeid rakenduste Project Service Automation ja Finance vahel sünkroonitakse.</span><span class="sxs-lookup"><span data-stu-id="cba30-110">The following illustration shows how the data is synchronized between Project Service Automation and Finance.</span></span>

<span data-ttu-id="cba30-111">[![Andmevoog Project Service Automationi integreerimiseks rakendusega Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span><span class="sxs-lookup"><span data-stu-id="cba30-111">[![Data flow for Project Service Automation integration with Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="cba30-112">Mallid ja ülesanded</span><span class="sxs-lookup"><span data-stu-id="cba30-112">Templates and tasks</span></span>

<span data-ttu-id="cba30-113">Saadaolevatele mallidele Microsoft Power Appsi halduskeskuses juurdepääsuks valige **Projektid** ja seejärel valige paremas ülanurgas **Uus projekt**, et valida avalikud mallid.</span><span class="sxs-lookup"><span data-stu-id="cba30-113">To access the available templates, in the Microsoft Power Apps admin center, select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="cba30-114">Projektilepingute ja projektide sünkroonimiseks Project Service Automationist Finance’i kasutatakse järgmisi malle ja aluseks olevaid ülesandeid.</span><span class="sxs-lookup"><span data-stu-id="cba30-114">The following templates and underlying tasks are used to synchronize project contracts and projects from Project Service Automation to Finance:</span></span>

### <a name="integrating-with-dynamics-365-project-service-automation-v2x"></a><span data-ttu-id="cba30-115">Integreerimine Dynamics 365 Project Service Automationv2.x-iga</span><span class="sxs-lookup"><span data-stu-id="cba30-115">Integrating with Dynamics 365 Project Service Automation v2.x</span></span>
- <span data-ttu-id="cba30-116">**Malli nimi andmeintegratsioonis:** projektid ja lepingud (Project Service Automationist Finance'i)</span><span class="sxs-lookup"><span data-stu-id="cba30-116">**Name of the template in Data integration:** Projects and contracts (Project Service Automation to Finance)</span></span>
- <span data-ttu-id="cba30-117">**Ülesannete nimi projektis:**</span><span class="sxs-lookup"><span data-stu-id="cba30-117">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="cba30-118">Projekti lepingud Project Service Automationist Finance'i</span><span class="sxs-lookup"><span data-stu-id="cba30-118">Project contracts Project Service Automation to Finance</span></span>
    - <span data-ttu-id="cba30-119">Projektid Project Service Automationist Finance'i</span><span class="sxs-lookup"><span data-stu-id="cba30-119">Projects Project Service Automation to Finance</span></span>
    - <span data-ttu-id="cba30-120">Projekti lepinguread Project Service Automationist Finance'i</span><span class="sxs-lookup"><span data-stu-id="cba30-120">Project contract lines Project Service Automation to Finance</span></span>
    - <span data-ttu-id="cba30-121">Projekti lepingurea vahe-etapid Project Service Automationist Finance'i</span><span class="sxs-lookup"><span data-stu-id="cba30-121">Project contract line milestones Project Service Automation to Finance</span></span>
  
### <a name="integrating-with-dynamics-365-project-service-automation-v3x"></a><span data-ttu-id="cba30-122">Integreerimine Dynamics 365 Project Service Automation v3.x-iga</span><span class="sxs-lookup"><span data-stu-id="cba30-122">Integrating with Dynamics 365 Project Service Automation v3.x</span></span>
<span data-ttu-id="cba30-123">Project Service Automationis on skeemimuutus, mis mõjutab projekti lepingurea vahe-eesmärgi malli ja vajalik on malli v2 versiooni kasutamine, et integreerida Project Service Automation v3.x Dynamics 365-ga.</span><span class="sxs-lookup"><span data-stu-id="cba30-123">There is a schema change in Project Service Automation that impacts the Project contract line milestone template and use of the v2 version of the template is required to integrate Project Service Automation v3.x with Dynamics 365.</span></span>

- <span data-ttu-id="cba30-124">**Malli nimi andmeintegratsioonis:** projektid ja lepingud (Project Service Automationi versioonist 3.x rakendusse Finance) - v2</span><span class="sxs-lookup"><span data-stu-id="cba30-124">**Name of the template in Data integration:** Projects and Contracts (Project Service Automation 3.x to Finance) - v2</span></span>
- <span data-ttu-id="cba30-125">**Ülesannete nimi projektis:**</span><span class="sxs-lookup"><span data-stu-id="cba30-125">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="cba30-126">Projekti lepingud Project Service Automationist Finance'i</span><span class="sxs-lookup"><span data-stu-id="cba30-126">Project contracts Project Service Automation to Finance</span></span>
    - <span data-ttu-id="cba30-127">Projektid Project Service Automationist Finance'i</span><span class="sxs-lookup"><span data-stu-id="cba30-127">Projects Project Service Automation to Finance</span></span>
    - <span data-ttu-id="cba30-128">Projekti lepinguread Project Service Automationist Finance'i</span><span class="sxs-lookup"><span data-stu-id="cba30-128">Project contract lines Project Service Automation to Finance</span></span>
    - <span data-ttu-id="cba30-129">Projekti lepingurea vahe-etapid Project Service Automationist Finance'i</span><span class="sxs-lookup"><span data-stu-id="cba30-129">Project contract line milestones Project Service Automation to Finance</span></span>

<span data-ttu-id="cba30-130">Enne kui projekti lepingute ja projektide sünkroonimine saab aset leida, peate sünkroonima kontod.</span><span class="sxs-lookup"><span data-stu-id="cba30-130">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>

## <a name="entity-set"></a><span data-ttu-id="cba30-131">Olemikogum</span><span class="sxs-lookup"><span data-stu-id="cba30-131">Entity set</span></span>

| <span data-ttu-id="cba30-132">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="cba30-132">Project Service Automation</span></span>       | <span data-ttu-id="cba30-133">Finance</span><span class="sxs-lookup"><span data-stu-id="cba30-133">Finance</span></span>                                                |
|----------------------------------|--------------------------------------------------------|
| <span data-ttu-id="cba30-134">Tellimused</span><span class="sxs-lookup"><span data-stu-id="cba30-134">Orders</span></span>                           | <span data-ttu-id="cba30-135">Integratsiooniolem projektilepingu jaoks</span><span class="sxs-lookup"><span data-stu-id="cba30-135">Integration entity for project contract</span></span>                |
| <span data-ttu-id="cba30-136">Projektid</span><span class="sxs-lookup"><span data-stu-id="cba30-136">Projects</span></span>                         | <span data-ttu-id="cba30-137">Integratsiooniolem projekti jaoks</span><span class="sxs-lookup"><span data-stu-id="cba30-137">Integration entity for project</span></span>                         |
| <span data-ttu-id="cba30-138">Tellimuse read</span><span class="sxs-lookup"><span data-stu-id="cba30-138">Order lines</span></span>                      | <span data-ttu-id="cba30-139">Integratsiooniolem projekti lepingurea jaoks</span><span class="sxs-lookup"><span data-stu-id="cba30-139">Integration entity for project contract line</span></span>           |
| <span data-ttu-id="cba30-140">Projekti lepingurea vahekokkuvõtted</span><span class="sxs-lookup"><span data-stu-id="cba30-140">Project contract line milestones</span></span> | <span data-ttu-id="cba30-141">Integratsiooniolem projekti lepingurea vahekokkuvõtte jaoks</span><span class="sxs-lookup"><span data-stu-id="cba30-141">Integration entity for project contract line milestone</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="cba30-142">Olemi voog</span><span class="sxs-lookup"><span data-stu-id="cba30-142">Entity flow</span></span>

<span data-ttu-id="cba30-143">Projektilepinguid hallatakse rakenduses Project Service Automation ja need sünkroonitakse rakendusega Finance kui projektilepigud.</span><span class="sxs-lookup"><span data-stu-id="cba30-143">Project contracts are managed in Project Service Automation, and they are synchronized to Finance as project contracts.</span></span> <span data-ttu-id="cba30-144">Integreerimismalli osana saate seada projektilepingu integreerimisallika Finance'is.</span><span class="sxs-lookup"><span data-stu-id="cba30-144">As part of the integration template, you can set the integration source in Finance for the project contract.</span></span>

<span data-ttu-id="cba30-145">Aja- ja materjali ning fikseeritud hinnaga projekte hallatakse Project Service Automationis ja sünkroonitakse projektidena rakendusse Finance.</span><span class="sxs-lookup"><span data-stu-id="cba30-145">Time and material and fixed-price projects are managed in Project Service Automation and synchronized to Finance as projects.</span></span> <span data-ttu-id="cba30-146">Malli integreerimise osana saate rakenduses Finance seadistada projektile integratsiooniallika.</span><span class="sxs-lookup"><span data-stu-id="cba30-146">As part of the template integration, you can set the integration source for the project in Finance.</span></span> <span data-ttu-id="cba30-147">Praegu toetatakse vaid aja- ja materjali ning fikseeritud hinnaga projekte.</span><span class="sxs-lookup"><span data-stu-id="cba30-147">Currently, only time and material and fixed-price projects are supported.</span></span>


<span data-ttu-id="cba30-148">Projekti lepinguridu hallatakse rakenduses Project Service Automation ja need sünkroonitakse rakendusega Finance kui lepigu arvereeglid.</span><span class="sxs-lookup"><span data-stu-id="cba30-148">Project contract lines are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rules.</span></span> <span data-ttu-id="cba30-149">Kui arvelduse meetod erineb vaike-projektitüübist, uuendab sünkroonimine lepingurea projekti projektitüübi ja projektirühma.</span><span class="sxs-lookup"><span data-stu-id="cba30-149">If the billing method differs from the default project type, the synchronization updates the project type for the contract line project and project group.</span></span>

<span data-ttu-id="cba30-150">Projekti lepinguridade vahekokkuvõtteid hallatakse rakenduses Project Service Automation ja need sünkroonitakse rakendusega Finance kui lepigu arvereeglite vahekokkuvõtted.</span><span class="sxs-lookup"><span data-stu-id="cba30-150">Project contract line milestones are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rule milestones.</span></span>

## <a name="project-service-automation-to-finance-integration-solution"></a><span data-ttu-id="cba30-151">Integratsioonilahendus Project Service Automationist rakendusse Finance</span><span class="sxs-lookup"><span data-stu-id="cba30-151">Project Service Automation to Finance integration solution</span></span>

<span data-ttu-id="cba30-152">Väli **Projektilepingu ID** on saadaval lehel **Projektilepingud**.</span><span class="sxs-lookup"><span data-stu-id="cba30-152">The **Project contract ID** field is available on the **Project contracts** page.</span></span> <span data-ttu-id="cba30-153">See väli on muutnud integratsiooni toetamiseks loomuliku ja kordumatu võtme.</span><span class="sxs-lookup"><span data-stu-id="cba30-153">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="cba30-154">Uue projektilepingu loomisel juhul, kui **Projektilepingu ID** väärtust pole veel olemas, genereeritakse see automaatselt numbriseeria abil.</span><span class="sxs-lookup"><span data-stu-id="cba30-154">When a new project contract is created, if a **Project contract ID** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="cba30-155">Väärtus koosneb järjestusest **ORD**, millele järgneb astmeline numbriseeria ja seejärel kuue märgi järelliide.</span><span class="sxs-lookup"><span data-stu-id="cba30-155">The value consists of **ORD** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="cba30-156">Siin on näide: **ORD-01022-Z4M9Q0**.</span><span class="sxs-lookup"><span data-stu-id="cba30-156">Here is an example: **ORD-01022-Z4M9Q0**.</span></span>

<span data-ttu-id="cba30-157">Väli **Projekti number** on saadaval lehel **Projektid**.</span><span class="sxs-lookup"><span data-stu-id="cba30-157">The **Project Number** field is available on the **Projects** page.</span></span> <span data-ttu-id="cba30-158">See väli on muutnud integratsiooni toetamiseks loomuliku ja kordumatu võtme.</span><span class="sxs-lookup"><span data-stu-id="cba30-158">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="cba30-159">Uue projektilepingu loomisel juhul, kui **Projektinumbri** väärtust pole veel olemas, genereeritakse see automaatselt numbriseeria abil.</span><span class="sxs-lookup"><span data-stu-id="cba30-159">When a new project is created, if a **Project Number** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="cba30-160">Väärtus koosneb järjestusest **PRJ**, millele järgneb astmeline numbriseeria ja seejärel kuue märgi järelliide.</span><span class="sxs-lookup"><span data-stu-id="cba30-160">The value consists of **PRJ** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="cba30-161">Siin on näide: **PRJ-01049-CCNID0**.</span><span class="sxs-lookup"><span data-stu-id="cba30-161">Here is an example: **PRJ-01049-CCNID0**.</span></span>

<span data-ttu-id="cba30-162">Kui rakendatakse integreerimislahendust Project Service Automationist Finance'i, seab versiooniuuenduse skript välja **Projektilepingu ID** olemasolevatele projektilepingutele ja välja **Projektinumber** olemasolevatele projektidele Project Service Automationis.</span><span class="sxs-lookup"><span data-stu-id="cba30-162">When the Project Service Automation to Finance integration solution is applied, an upgrade script sets the **Project contract ID** field for existing project contracts and the **Project Number** field for existing projects in Project Service Automation.</span></span>

## <a name="prerequisites-and-mapping-setup"></a><span data-ttu-id="cba30-163">Eeltingimused ja vastenduse seadistamine</span><span class="sxs-lookup"><span data-stu-id="cba30-163">Prerequisites and mapping setup</span></span>

- <span data-ttu-id="cba30-164">Enne kui projekti lepingute ja projektide sünkroonimine saab aset leida, peate sünkroonima kontod.</span><span class="sxs-lookup"><span data-stu-id="cba30-164">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>
- <span data-ttu-id="cba30-165">Lisage seadistatud ühenduses väli integratsioonivõtme väli, mis vastendab **msdyn\_organizationalunits** ja **msdyn\_name \[Name\]**.</span><span class="sxs-lookup"><span data-stu-id="cba30-165">In your connection set, add an integration key field mapping for **msdyn\_organizationalunits** to **msdyn\_name \[Name\]**.</span></span> <span data-ttu-id="cba30-166">Võimalik, et peate esmalt lisama projekti ühenduse komplektile.</span><span class="sxs-lookup"><span data-stu-id="cba30-166">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="cba30-167">Lisateavet leiate teemast [Andmete integreerimine Common Data Service rakendustele](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="cba30-167">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="cba30-168">Lisage seadistatud ühenduses väli integratsioonivõtme väli, mis vastendab **msdyn\_projects** ja **msdynce\_projectnumber \[Project Number\]**.</span><span class="sxs-lookup"><span data-stu-id="cba30-168">In your connection set, add an integration key field mapping for **msdyn\_projects** to **msdynce\_projectnumber \[Project Number\]**.</span></span> <span data-ttu-id="cba30-169">Võimalik, et peate esmalt lisama projekti ühenduse komplektile.</span><span class="sxs-lookup"><span data-stu-id="cba30-169">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="cba30-170">Lisateavet leiate teemast [Andmete integreerimine Common Data Service rakendustele](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="cba30-170">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="cba30-171">Projekti lepingute ja projektide **SourceDataID**-d saab uuendada erineva väärtusega või eemaldada vastendusest.</span><span class="sxs-lookup"><span data-stu-id="cba30-171">**SourceDataID** for project contracts and projects can be updated to a different value or removed from the mapping.</span></span> <span data-ttu-id="cba30-172">Malli vaikeväärtuseks on **Project Service Automation**.</span><span class="sxs-lookup"><span data-stu-id="cba30-172">The default template value is **Project Service Automation**.</span></span>
- <span data-ttu-id="cba30-173">**PaymentTerms** vastendust tuleb värskendada nii, et see kajastaks kehtivaid maksetingimusi Finance'is.</span><span class="sxs-lookup"><span data-stu-id="cba30-173">The **PaymentTerms** mapping must be updated so that it reflects valid terms of payment in Finance.</span></span> <span data-ttu-id="cba30-174">Vastenduse saate eemaldada ka projekti tööülesandest.</span><span class="sxs-lookup"><span data-stu-id="cba30-174">You can also remove the mapping from the project task.</span></span> <span data-ttu-id="cba30-175">Vaikeväärtuste vastendusel on demo andmete jaoks vaikeväärtused.</span><span class="sxs-lookup"><span data-stu-id="cba30-175">The default value map has default values for demo data.</span></span> <span data-ttu-id="cba30-176">Järgmises tabelis on toodud väärtused Project Service Automationis.</span><span class="sxs-lookup"><span data-stu-id="cba30-176">The following table shows the values in Project Service Automation.</span></span>

    | <span data-ttu-id="cba30-177">Väärtus</span><span class="sxs-lookup"><span data-stu-id="cba30-177">Value</span></span> | <span data-ttu-id="cba30-178">Kirjeldus</span><span class="sxs-lookup"><span data-stu-id="cba30-178">Description</span></span>   |
    |-------|---------------|
    | <span data-ttu-id="cba30-179">1</span><span class="sxs-lookup"><span data-stu-id="cba30-179">1</span></span>     | <span data-ttu-id="cba30-180">Makse 30 päeva jooksul</span><span class="sxs-lookup"><span data-stu-id="cba30-180">Net 30</span></span>        |
    | <span data-ttu-id="cba30-181">2</span><span class="sxs-lookup"><span data-stu-id="cba30-181">2</span></span>     | <span data-ttu-id="cba30-182">2% 10 päeva, neto 30 päeva</span><span class="sxs-lookup"><span data-stu-id="cba30-182">2% 10, Net 30</span></span> |
    | <span data-ttu-id="cba30-183">3</span><span class="sxs-lookup"><span data-stu-id="cba30-183">3</span></span>     | <span data-ttu-id="cba30-184">Makse 45 päeva jooksul</span><span class="sxs-lookup"><span data-stu-id="cba30-184">Net 45</span></span>        |
    | <span data-ttu-id="cba30-185">4</span><span class="sxs-lookup"><span data-stu-id="cba30-185">4</span></span>     | <span data-ttu-id="cba30-186">Makse 60 päeva jooksul</span><span class="sxs-lookup"><span data-stu-id="cba30-186">Net 60</span></span>        |

## <a name="power-query"></a><span data-ttu-id="cba30-187">Power Query</span><span class="sxs-lookup"><span data-stu-id="cba30-187">Power Query</span></span>

<span data-ttu-id="cba30-188">Kui järgmised tingimused on täidetud, kasutage andmete filtreerimiseks lahendust Microsoft Power Query for Excel.</span><span class="sxs-lookup"><span data-stu-id="cba30-188">Use Microsoft Power Query for Excel to filter data if the following conditions are met:</span></span>

- <span data-ttu-id="cba30-189">Teil on Dynamics 365 Salesis müügitellimused.</span><span class="sxs-lookup"><span data-stu-id="cba30-189">You have sales orders in Dynamics 365 Sales.</span></span>
- <span data-ttu-id="cba30-190">Teil on Project Service Automationis mitu organisatsiooniüksust ja need üksused vastendatakse mitme juriidilise olemiga Finance'is.</span><span class="sxs-lookup"><span data-stu-id="cba30-190">You have multiple organizational units in Project Service Automation, and these organizational units will be mapped to multiple legal entities in Finance.</span></span>

<span data-ttu-id="cba30-191">Kui peate kasutama Power Queryd, järgige neid suuniseid.</span><span class="sxs-lookup"><span data-stu-id="cba30-191">If you must use Power Query, follow these guidelines:</span></span>

- <span data-ttu-id="cba30-192">Projektide ja lepingute (PSA-st Fin and Opsini) mallil on vaikefilter, mis sisaldab ainult **Tööde üksuse (msdyn\_ordertype = 192350001)** tüüpi müügitellimusi.</span><span class="sxs-lookup"><span data-stu-id="cba30-192">The Projects and contracts (PSA to Fin and Ops) template has a default filter that includes only sales orders of the **Work item (msdyn\_ordertype = 192350001)** type.</span></span> <span data-ttu-id="cba30-193">See filter aitab tagada, et projektilepinguid ei loodaks Finance'is müügitellimustele.</span><span class="sxs-lookup"><span data-stu-id="cba30-193">This filter helps guarantee that project contracts aren't created for sales orders in Finance.</span></span> <span data-ttu-id="cba30-194">Kui loote oma malli, peate selle filtri lisama.</span><span class="sxs-lookup"><span data-stu-id="cba30-194">If you create your own template, you must add this filter.</span></span>
- <span data-ttu-id="cba30-195">Looge Power Query filter, mis sisaldab ainult neid lepingu organisatsioone, mida tuleks sünkroonida integratsiooni ühenduse komplekti juriidilise isiku juurde.</span><span class="sxs-lookup"><span data-stu-id="cba30-195">Create a Power Query filter that includes only the contract organizations that should be synchronized to the legal entity of the integration connection set.</span></span> <span data-ttu-id="cba30-196">Näiteks projekti lepingud, mis on seotud Contoso USA lepingu organisatsioonilise üksusega, tuleb sünkroonida USSI juriidilise isikuga, kuid projektilepingud, mis teil on Contoso Global lepingu organisatsioonilise üksusega tuleb sünkroonida USMF-i juriidilise isikuga.</span><span class="sxs-lookup"><span data-stu-id="cba30-196">For example, project contracts that you have with the contract organizational unit of Contoso US should be synchronized to the USSI legal entity, but project contracts that you have with the contract organizational unit of Contoso Global should be synchronized to the USMF legal entity.</span></span> <span data-ttu-id="cba30-197">Kui te ei lisa seda filtrit oma tööülesannete vastendamisel, sünkroonitakse kõik projektilepingud juriidilise isikuga, mis on määratletud ühenduse komplekti jaoks, olenemata lepingu organisatsioonilisest üksusest.</span><span class="sxs-lookup"><span data-stu-id="cba30-197">If you don't add this filter to your task mapping, all project contracts will be synchronized to the legal entity that is defined for the connection set, regardless of the contract organizational unit.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="cba30-198">Malli vastendamine andmete integratsioonis</span><span class="sxs-lookup"><span data-stu-id="cba30-198">Template mapping in Data integration</span></span>

> [!NOTE] 
> <span data-ttu-id="cba30-199">Välju **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState** ja **AddressZipCode** ei kaasata projektilepingute jaoks vaikimisi vastendamiseks.</span><span class="sxs-lookup"><span data-stu-id="cba30-199">The **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState**, and **AddressZipCode** fields aren't included in the default mapping for project contracts.</span></span> <span data-ttu-id="cba30-200">Vastendusi saate lisada juhul, kui soovite, et need andmed oleks projektilepingutes sünkroonitud.</span><span class="sxs-lookup"><span data-stu-id="cba30-200">You can add the mappings if you require that this data be synchronized for project contracts.</span></span>
>
> <span data-ttu-id="cba30-201">Väljad **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber** ja **ProjectType** ei sisaldu projektide vaikevastendamises.</span><span class="sxs-lookup"><span data-stu-id="cba30-201">The **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber**, and **ProjectType** fields aren't included in the default mapping for projects.</span></span> <span data-ttu-id="cba30-202">Vastendusi saate lisada juhul, kui soovite, et need andmed oleks projektides sünkroonitud.</span><span class="sxs-lookup"><span data-stu-id="cba30-202">You can add the mappings if you require that this data be synchronized for projects.</span></span>

<span data-ttu-id="cba30-203">Järgmisel joonisel on toodud andmete integratsioonis malli ülesande vastendamiste näited.</span><span class="sxs-lookup"><span data-stu-id="cba30-203">The following illustrations show examples of the template task mappings in Data integration.</span></span> <span data-ttu-id="cba30-204">Vastendus näitab välja teavet, mis sünkroonitakse Project Service Automationist rakendusse Finance.</span><span class="sxs-lookup"><span data-stu-id="cba30-204">The mapping shows the field information that will be synchronized from Project Service Automation to Finance.</span></span>

<span data-ttu-id="cba30-205">[![Projekti lepingumalli vastendus](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="cba30-205">[![Project contract template mapping](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span></span>

<span data-ttu-id="cba30-206">[![Projekti malli vastendus](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="cba30-206">[![Project template mapping](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span></span>

<span data-ttu-id="cba30-207">[![Projekti lepinguridade malli vastendus](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="cba30-207">[![Project contract lines template mapping](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span></span>

<span data-ttu-id="cba30-208">[![Projekti lepingurea vahe-eesmärgi malli vastendus](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="cba30-208">[![Project contract line milestone template mapping](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span></span>

#### <a name="project-contract-line-milestone-mapping-in-the-projects-and-contracts-psa-3x-to-dynamics---v2-template"></a><span data-ttu-id="cba30-209">Projekti lepingurea vahekokkuvõtte kaardistamine Projektides ja lepingutes (PSA 3.x-st Dynamicsisse) – v2 mall:</span><span class="sxs-lookup"><span data-stu-id="cba30-209">Project contract line milestone mapping in the Projects and Contracts (PSA 3.x to Dynamics) - v2 template:</span></span>

<span data-ttu-id="cba30-210">[![Projekti lepingurea vahe-eesmärgi malli vastendus versiooni kaks malliga](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span><span class="sxs-lookup"><span data-stu-id="cba30-210">[![Project contract line milestone mapping with version two template](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span></span>
